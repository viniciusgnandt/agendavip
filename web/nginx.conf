server {
    listen 3000;
    server_name _;

    root /usr/share/nginx/html;
    index index.html;

    # ðŸ”‘ Serve env.js corretamente
    location = /env.js {
        default_type application/javascript;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
        add_header Pragma "no-cache";
        add_header Expires "0";
        try_files /env.js =404;
    }

    # Arquivos estÃ¡ticos do CRA
    location /static/ {
        try_files $uri =404;
    }

    # SPA fallback (React Router)
    location / {
        try_files $uri /index.html;
    }

    # Fallback para arquivos comuns (js, css, imagens)
    location ~* \.(js|css|png|jpg|svg|ico)$ {
        try_files $uri =404;
    }
}